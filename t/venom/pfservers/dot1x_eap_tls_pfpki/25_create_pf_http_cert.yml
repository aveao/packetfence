name: Create PacketFence HTTP (Web admin + portal) certificate 
version: 2
testcases:
- name: create_pf_http_cert
  steps:
  - type: http
    method: POST
    url: '{{.pfserver_webadmin_url}}/api/v1/pki/certs'
    ignore_verify_ssl: true
    body: >-
      {
        "profile_id": "3",
        "cn": "PF_HTTP",
        "mail": "pfhttp@inverse.ca",
        "organisation": "Inverse",
        "country": "CA",
        "state": "Quebec",
        "locality": "Montreal",
        "street_address": "7000 park avenue",
        "postal_code": "H3N 1X1"
      }
    headers:
      "Authorization": "{{.pfserver_token}}"
      "Content-Type": "application/json"
    assertions:
      - result.statuscode ShouldEqual 200
